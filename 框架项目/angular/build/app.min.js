/*! iceKredit 2018-08-08 19:57:09 */
!function(){"use strict";angular.module("myApp",["ui.router","ngMessages","ngSanitize","ui.bootstrap","ngTable","allCtrl","angularFileUpload","services","directives","angular-cache"]).config(["$stateProvider","$urlRouterProvider","authTable",function($stateProvider,$urlRouterProvider,authTable){$urlRouterProvider.otherwise("/index"),$stateProvider.state("login",{url:"/login",views:{"":{templateUrl:"app/home/main.html"},"header@login":{templateUrl:"app/home/header.html"},"main@login":{templateUrl:"app/login/login.html",controller:"loginCtrl"}},data:authTable.login}).state("index",{url:"/index",views:{"":{templateUrl:"app/home/main.html",controller:"mainCtrl"},"header@index":{templateUrl:"app/home/header.html"},"main@index":{templateUrl:"app/home/index.html"},"footer@index":{templateUrl:"app/home/footer.html"}},data:authTable.index}).state("index.product1",{url:"/product1/:p",views:{"main@index":{templateUrl:"app/p_credit/product/product1.html",controller:"product1Ctrl"}},data:authTable.service})}]).config(["$httpProvider",function($httpProvider){$httpProvider.interceptors.push("httpInterceptor")}]).factory("httpInterceptor",["$q","$injector",function($q,$injector){return{response:function(response){return"200005"==response.data.response_code?(console.log("sds"),location.href="https://sso-test.icekredit.com/login?redirect_uri="+encodeURIComponent(window.location.href),$q.reject(response)):response}}}]).run(function($rootScope,$http){$rootScope.$on("$stateChangeStart",function(event,toState){$rootScope.active_item=toState.name.replace("index.","").replace(/\.\w*/,""),$rootScope.active_last_item=toState.name.replace("index.","").replace(/.*\./,"")}),$rootScope.investFilterWords="",$rootScope.info={titleImg:"img/logo_icon.png",headerImg:"img/co-logo.png"},$rootScope.getHeight=function(){return{"min-height":window.screen.availHeight-100}}}).directive("updateTitle",["$rootScope","$timeout",function($rootScope,$timeout){return{link:function(scope,element){var listener=function(event,toState){var title="Default Title";toState.data&&toState.data.pageTitle&&(title=toState.data.pageTitle),$timeout(function(){element.text(title)},0,!1)};$rootScope.$on("$stateChangeSuccess",listener)}}}])}(),function(){"use strict";angular.module("allCtrl",["main","pCreditBinding","pCreditService","pCreditAddService","login","product1"])}(),function(){angular.module("directives",[]).directive("chart",function(){return{scope:{id:"@",option:"="},link:function(scope){var option=scope.option;scope.$watch("option",function(){var myChart=echarts.init(document.getElementById(scope.id));myChart.setOption(option)})}}}).directive("changeChart",function(){return{scope:{id:"@",option:"="},require:"ngModel",link:function(scope,ele,attr,ngModel){scope.$watch("option",function(){var myChart=echarts.init(document.getElementById(scope.id));myChart.setOption(ngModel.$modelValue)})}}}).directive("alert",function(){return{restrict:"E",scope:{name:"@",mtitle:"@",okFunc:"&",level:"@"},template:'<div class="modal fade in open" id="{{name}}" tabindex="-1" role="dialog" aria-hidden="true" data-backdrop="static"><div class="modal-dialog vdmc-alert"><div class=" alert alert-{{level}} row"><div class="modalimg"><i ng-if=" level===\'danger\'" class="glyphicon glyphicon-remove-circle "></i><i ng-if=" level===\'info\'" class="glyphicon glyphicon-info-sign "></i><i ng-if=" level===\'success\'" class="glyphicon glyphicon-ok-circle "></i><i ng-if=" level===\'warning\'" class="glyphicon glyphicon-alert "></i></div><div class="modaltitle"><a class="close"  ng-click="okFunc()">×</a><div><b ng-if=" level===\'danger\'">操作失败！</b><b ng-if=" level===\'info\'">提示：</b><b ng-if=" level===\'success\'">操作成功！</b><b ng-if=" level===\'warning\'">警告：</b></div><div>{{mtitle}}</div></div></div></div></div>',replace:!0,link:function(scope,element){var $ele=$(element),modalId="#"+scope.name;$ele.on("click",".close",function(){$(modalId).modal("hide"),$(modalId).remove();var modalback=$(".modal-backdrop");modalback.length>0&&modalback[modalback.length-1].remove()}),$(".ice_panel_body").addClass("modal-open").append('<div class="modal-backdrop fade in"></div>')}}}).directive("datetimepicker",function(){return{restrict:"EA",require:"ngModel",replace:!0,scope:{inputWidth:"@",ngModel:"=",functionName:"="},link:function(scope,element,attrs,ngmodel){function initialize(value){ngmodel.$setViewValue(value),unregister()}var unregister=scope.$watch("ngModel",function(){return element.html("<input readonly='readonly'' name='+ attrs.dateid + ' id='date-"+attrs.dateid+"' class='input' style='width: "+(scope.inputWidth||"2rem")+"'>"),$("#date-"+attrs.dateid).val(scope.ngModel),element.css("padding","0"),element.on("change",function(){scope.$apply(function(){ngmodel.$setViewValue($("#date-"+attrs.dateid).val())})}),element.on("click",function(){$("#date-"+attrs.dateid).datetimepicker({format:attrs.format||"Y-m-d h:i:s",yearStart:1950,onClose:function(){element.change()}})}),element.click(),ngmodel.$modelValue},initialize)}}}).directive("timePicker",function(){return{restrict:"EA",require:"ngModel",replace:!0,scope:{inputWidth:"@",ngModel:"=",functionName:"="},link:function(scope,element,attrs,ngmodel){function initialize(value){ngmodel.$setViewValue(value),unregister()}var unregister=scope.$watch("ngModel",function(){return element.html("<input id='date-"+attrs.dateid+"' class='input' style='width: "+(scope.inputWidth||"1.6rem")+"'>"),$("#date-"+attrs.dateid).val(scope.ngModel),element.css("padding","0"),element.on("change",function(){scope.$apply(function(){ngmodel.$setViewValue($("#date-"+attrs.dateid).val())})}),element.on("click",function(){$("#date-"+attrs.dateid).datetimepicker({datepicker:!1,format:attrs.format||"H:i:s",step:5,onClose:function(){element.change()}})}),element.click(),ngmodel.$modelValue},initialize)}}}).directive("datePicker",function(){return{restrict:"EA",require:"ngModel",replace:!0,scope:{inputWidth:"@",ngModel:"=",functionName:"="},link:function(scope,element,attrs,ngmodel){function initialize(value){ngmodel.$setViewValue(value),unregister()}var unregister=scope.$watch("ngModel",function(){return element.html("<input readonly='readonly' id='date-"+attrs.dateid+"' class='input' style='width: "+(scope.inputWidth||"1.6rem")+"'>"),$("#date-"+attrs.dateid).val(scope.ngModel),element.css("padding","0"),element.on("change",function(){scope.$apply(function(){ngmodel.$setViewValue($("#date-"+attrs.dateid).val())})}),element.on("click",function(){$("#date-"+attrs.dateid).datetimepicker({timepicker:!1,format:attrs.format||"Y-m-d",yearStart:1950,step:5,onClose:function(){element.change()}})}),element.click(),ngmodel.$modelValue},initialize)}}}).directive("fileUpload",function(){return{scope:!0,link:function(scope,el,attrs){el.bind("change",function(event){for(var files=event.target.files,i=0;i<files.length;i++)scope.$emit("fileSelected",{file:files[i]})})}}})}(),function(){angular.module("services",[]).factory("httpServer",["$http","httpFunction","CacheFactory",function($http,httpFunction,CacheFactory){var objToString=function(obj){var str="?";for(var i in obj)str=str+i+"="+obj[i]+"&";return str};return{get_hive_data_domain:function(obj){return httpFunction.http_no_catch("/xx/xx"+objToString(obj))}}}]).factory("httpFunction",["$http","$q","CacheFactory",function($http,$q,CacheFactory){function serializeData(data){if(!angular.isObject(data))return null==data?"":data.toString();var buffer=[];for(var name in data)if(data.hasOwnProperty(name)){var value=data[name];buffer.push(encodeURIComponent(name)+"="+encodeURIComponent(null==value?"":value))}var source=buffer.join("&").replace(/%20/g,"+");return source}CacheFactory("dataCache",{maxAge:9e5,cacheFlushInterval:36e5,deleteOnExpire:"aggressive"});var transFn=function(data){return serializeData(data)},postCfg={headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},transformRequest:transFn},postFile={headers:{"Content-Type":"multipart/form-data"},transformRequest:transFn},postCfgFile={headers:{"Content-Type":void 0},transformRequest:angular.identity};return{http_catch:function(str){var deferred=$q.defer(),dataCache=CacheFactory.get("dataCache");return dataCache.get(str)?deferred.resolve(dataCache.get(str)):$http.get(str).success(function(data){"00"==data.response_code&&dataCache.put(str,data),deferred.resolve(data)}),deferred.promise},http_no_catch:function(str,obj){var deferred=$q.defer();return obj?$http.post(str,obj).success(function(data){deferred.resolve(data)}):$http.get(str).success(function(data){deferred.resolve(data)}),deferred.promise},http_remove_catch:function(str,obj,cat){var deferred=$q.defer(),dataCache=CacheFactory.get("dataCache");return obj?$http.post(str,obj).success(function(data){dataCache.get(cat)&&dataCache.remove(cat),deferred.resolve(data)}):$http.get(str).success(function(data){dataCache.get(cat)&&dataCache.remove(cat),deferred.resolve(data)}),deferred.promise},http_form_data:function(str,obj){var deferred=$q.defer();return $http.post(str,obj,postCfg).success(function(data){deferred.resolve(data)}),deferred.promise},http_form_data_file:function(str,obj){var deferred=$q.defer();return $http.post(str,obj,postFile).success(function(data){deferred.resolve(data)}),deferred.promise},http_form_file_data_one:function(str,obj){var deferred=$q.defer(),data=new FormData;return angular.forEach(obj,function(value,key){return"file"==key?void data.append(key,value):void data.append(key,value)}),$http.post(str,data,postCfgFile).success(function(data){deferred.resolve(data)}),deferred.promise}}}]).factory("getCheckboxSelected",["$q",function($q){return{selectAll:function(select,checked,all){return select?(checked=[],angular.forEach(all,function(i){i.checked=!0,checked.push(i)})):angular.forEach(all,function(i){i.checked=!1,checked=[]}),{isAll:select,checked:checked,all:all}},selectOne:function(select,checked,all){return angular.forEach(all,function(i){var index=checked.indexOf(i);i.checked&&-1==index?checked.push(i):i.checked||-1==index||checked.splice(index,1)}),select=all.length==checked.length?!0:!1,{isAll:select,checked:checked,all:all}}}}]).filter("highlight",function($sce){return function(text){var result=text.replace(/red/gi,"span");return $sce.trustAsHtml(result)}}).constant("authTable",{login:{pageTitle:"登录",auth:{loginCheck:!1,firstLoginCheck:!1}},index:{pageTitle:"西安誉宏电子科技有限公司",auth:{loginCheck:!0}},binding:{pageTitle:"西安誉宏电子科技有限公司",auth:{loginCheck:!0}},service:{pageTitle:"西安誉宏电子科技有限公司",auth:{loginCheck:!0}}}).filter("emptyTo",function(){return function(input){return""===input||null==input?"-":input}})}(),function(){angular.module("main",[]).controller("mainCtrl",["$scope","httpServer","$rootScope","$state","$stateParams","$timeout",function($scope,httpServer,$rootScope,$state,$stateParams,$timeout){$scope.doClickLogo=function(){location.href="/"},$scope.headerNav=[{name:"首页",id:"index"},{name:"速达",id:"solve"},{name:"金蝶",id:"jin"},{name:"下载中心",id:"download"},{name:"誉宏产品",id:"service",children:[{name:"条码系统",id:"service0"},{name:"远程接入系统",id:"service1"},{name:"短信接口",id:"service2"},{name:"誉宏设计",id:"service3"}]},{name:"服务项目",id:"down",children:[{name:"热线项目",id:"down"},{name:"升级服务",id:"down"},{name:"现场服务",id:"down"},{name:"培训服务",id:"down"}]}],$scope.isHeaderNav=0,$scope.hMouseOver=function(i){$scope.isHeaderNav=i},$scope.hMouseOut=function(i){$scope.isHeaderNav=0},$scope.doClick=function(id,$event){$event.stopPropagation(),console.log("main"),console.log(id),$timeout(function(){"index"===id&&$.fn.fullpage.moveTo("page1",1),"service"===id&&$.fn.fullpage.moveTo("page2",2),"service0"===id&&(window.open("#/index/product1/0","_self"),location.reload()),"service1"===id&&(window.open("#/index/product1/1","_self"),location.reload()),"service2"===id&&(window.open("#/index/product1/2","_self"),location.reload()),"service3"===id&&(window.open("#/index/product1/3","_self"),location.reload()),"solve"===id&&window.open("http://117.34.80.220:3001","_blank"),"jin"===id&&window.open("http://117.34.80.220:3002","_blank"),"down"===id&&$.fn.fullpage.moveTo("page3",3),"download"===id&&$.fn.fullpage.moveTo("page4",4)})}}])}(),function(){"use strict";angular.module("login",[]).controller("loginCtrl",["$scope","httpServer","$state","$rootScope",function($scope,httpServer,$state,$rootScope){$scope.loginParams={username:"",password:"",captcha:""},$scope.captchaUrl="/auth/captcha?r="+Date.parse(new Date),$scope.pressEnter=function(){"13"!=event.keyCode||$scope.inLogining||$scope.userLogin()},$scope.refreshCaptcha=function(){document.getElementById("captcha").src="/auth/captcha?r="+Date.parse(new Date)},$scope.inLogining=!1,$scope.userLogin=function(){$scope.inLogining=!0,$scope.loginError="",$rootScope.sessionLose="",httpServer.login($scope.loginParams).then(function(result){$scope.inLogining=!1,"00"==result.response_code?(sessionStorage.setItem("user-x-x-x-x-LoginState",!0),$state.go("index")):($scope.loginError=result.response_msg,document.getElementById("captcha").src="/auth/captcha?r="+Date.parse(new Date))})}}])}(),function(){angular.module("pCreditAddService",[]).controller("pCreditAddServiceCtrl",["$scope","$http","$rootScope","httpServer","ngTableDefaults","NgTableParams","$state",function($scope,$http,$rootScope,httpServer,ngTableDefaults,NgTableParams,$state){}])}(),function(){angular.module("pCreditBinding",[]).controller("pCreditBindingCtrl",["$scope","$http","$timeout","$rootScope","httpServer","ngTableDefaults","NgTableParams","$state","$timeout","getCheckboxSelected",function($scope,$http,$timeout,$rootScope,httpServer,ngTableDefaults,NgTableParams,$state,$timeout,getCheckboxSelected){}])}(),function(){angular.module("product1",[]).controller("product1Ctrl",["$scope","$http","$rootScope","httpServer","ngTableDefaults","NgTableParams","$state","$stateParams",function($scope,$http,$rootScope,httpServer,ngTableDefaults,NgTableParams,$state,$stateParams){$scope.tabs=[{name:"条码系统"},{name:"远程接入系统"},{name:"短信接口"},{name:"誉宏设计"}],$stateParams.p?$scope.tabsActive=$stateParams.p:$scope.tabsActive=0,console.log($scope.tabsActive),$scope.doTabsCheck=function(i){$scope.tabsActive=i}}])}(),function(){angular.module("pCreditService",[]).controller("pCreditServiceCtrl",["$scope","$http","$rootScope","httpServer","ngTableDefaults","NgTableParams","$state",function($scope,$http,$rootScope,httpServer,ngTableDefaults,NgTableParams,$state){}])}();